<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Duran's Barber Shop - Domina tu Estilo</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />

    <!-- Cargar Netlify Identity temprano -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
      (function () {
        // Si llegas desde el email de invitaci√≥n con #invite_token=..., reenviamos a /admin manteniendo el hash
        var hash = window.location.hash || "";
        if (hash.indexOf("invite_token=") !== -1) {
          // Redirige inmediatamente a /admin/#invite_token=...
          window.location.replace("/admin/" + hash);
          return;
        }

        // Si ya hay sesi√≥n activa, entra directo al panel
        if (window.netlifyIdentity) {
          window.netlifyIdentity.on("init", function (user) {
            if (user) {
              window.location.replace("/admin/");
            } else {
              window.netlifyIdentity.on("login", function () {
                window.location.replace("/admin/");
              });
            }
          });
        }
      })();
    </script>

    <style>
      :root { --color-fondo:#1a1a1a; --color-texto:#ffffff; --color-acento:#ffcc66; --color-secundario:#333333; --color-blanco-logo:#ffffff; }
      body { font-family:"Montserrat",sans-serif; margin:0; padding:0; background-color:var(--color-fondo); color:var(--color-texto); line-height:1.6; }
      a { text-decoration:none; }
      .container { width:90%; max-width:1200px; margin:0 auto; }
      .header { background:#000; padding:15px 5%; display:flex; justify-content:space-between; align-items:center; position:sticky; top:0; z-index:100; box-shadow:0 2px 5px rgba(0,0,0,.5); flex-wrap:wrap; }
      .logo img { height:50px; filter:invert(1) grayscale(100%) brightness(200%); cursor:pointer; }
      .nav { display:flex; align-items:center; }
      .nav a { color:var(--color-texto); margin-left:25px; font-size:.9em; font-weight:500; text-transform:uppercase; transition:color .3s; }
      .nav a:hover { color:var(--color-acento); }
      .btn-cita { background:var(--color-acento); color:var(--color-fondo)!important; padding:10px 20px; font-weight:bold; border-radius:3px; transition:background-color .3s; }
      .btn-cita:hover { background:#e6b85c; }
      .hero-section { background-image:url("https://i.postimg.cc/zv5DbBj8/IMG-5592.jpg"); background-size:cover; background-position:center; padding:80px 5%; text-align:center; position:relative; min-height:300px; display:flex; align-items:center; justify-content:center; }
      .hero-section::before { content:""; position:absolute; inset:0; background:rgba(0,0,0,.7); }
      .hero-content { position:relative; z-index:2; }
      .hero-section h1 { font-size:3em; margin-bottom:10px; font-weight:700; text-transform:uppercase; }
      .hero-section p { font-size:1.1em; margin-bottom:40px; }
      .services-section { padding:60px 5%; text-align:center; }
      .services-section h2 { color:var(--color-acento); margin-bottom:40px; }
      .services-grid { display:flex; justify-content:space-around; gap:30px; margin-top:40px; }
      .service-item { flex:1; padding:30px 20px; background:var(--color-secundario); border-radius:5px; transition:transform .3s; box-shadow:0 5px 10px rgba(0,0,0,.2); }
      .service-item h3 { color:var(--color-acento); font-size:1.2em; margin-top:10px; text-transform:uppercase; }
      .service-icon { font-size:3em; color:var(--color-acento); margin-bottom:10px; }
      .gallery-section { padding:60px 5%; }
      .gallery-section h2 { text-align:center; margin-bottom:40px; font-size:2em; color:var(--color-acento); }
      .gallery-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; }
      .gallery-item img { width:100%; height:250px; object-fit:cover; display:block; border-radius:5px; transition:transform .3s; box-shadow:0 5px 15px rgba(0,0,0,.3); cursor:pointer; }
      .gallery-item img:hover { transform:scale(1.03); opacity:.9; }
      .footer { background:#000; padding:30px 5%; text-align:center; margin-top:50px; border-top:3px solid var(--color-acento); }
      .btn-export { background:#555; color:#fff; padding:10px 20px; border:none; border-radius:3px; cursor:pointer; margin-top:20px; transition:background-color .3s; }
      .btn-export:hover { background:#777; }
      @media (max-width:768px){ .header{flex-direction:column; padding:15px;} .nav{width:100%; justify-content:space-around; flex-wrap:wrap; margin-top:10px;} .hero-section{background-position:center top;} .hero-section h1{font-size:2.5em;} .services-grid{flex-direction:column;} .gallery-grid{grid-template-columns:repeat(2,1fr);} .gallery-item img{height:200px;} }
    </style>
  </head>
  <body>
    <div id="imageModal" style="display:none; position:fixed; z-index:200; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,.9);">
      <span style="position:absolute; top:15px; right:35px; color:#f1f1f1; font-size:40px; font-weight:bold; cursor:pointer;">&times;</span>
      <img id="modalContent" style="margin:auto; display:block; width:80%; max-width:700px; margin-top:10%;">
      <div id="caption" style="margin:auto; display:block; width:80%; max-width:700px; text-align:center; color:#ccc; padding:10px 0;"></div>
    </div>

    <header class="header">
      <div class="logo">
        <img src="https://i.postimg.cc/bw6Z7QRk/IMG-5558.jpg" alt="Duran's Barber Shop Logo" />
      </div>
      <nav class="nav">
        <a href="#servicios">SERVICIOS</a>
        <a href="#galeria">GALER√çA</a>
        <a href="#">BARBEROS</a>
        <a href="#">CONTACTO</a>
        <a href="https://wa.me/17754199929?text=Hola,%20me%20gustar%C3%ADa%20reservar%20una%20cita" target="_blank" class="btn-cita">RESERVAR AHORA</a>
      </nav>
    </header>

    <section class="hero-section">
      <div class="hero-content">
        <h1>DOMINA TU ESTILO.</h1>
        <p>Vive una experiencia de aseo experto en un ambiente atemporal.</p>
        <a href="https://wa.me/17754199929?text=Hola,%20me%20gustar%C3%ADa%20reservar%20una%20cita" target="_blank" class="btn-cita">RESERVAR CITA</a>
      </div>
    </section>

    <section id="servicios" class="services-section">
      <h2>NUESTROS SERVICIOS</h2>
      <div class="services-grid">
        <div class="service-item">
          <div class="service-icon">‚úÇÔ∏è</div>
          <h3>CORTES & DEGRADADOS</h3>
          <p>Estilos cl√°sicos y modernos, incluyendo desvanecidos y dise√±os precisos.</p>
        </div>
        <div class="service-item">
          <div class="service-icon">üßî</div>
          <h3>RECORTES Y AFEITADOS DE BARBA</h3>
          <p>Cuidado de barba con toalla caliente, perfilado y afeitado tradicional.</p>
        </div>
        <div class="service-item">
          <div class="service-icon">üëë</div>
          <h3>PAQUETES DE LUJO</h3>
          <p>La experiencia completa: corte, arreglo de barba y un tratamiento exclusivo.</p>
        </div>
      </div>
    </section>

    <section id="galeria" class="gallery-section">
      <h2>GALER√çA DE ESTILOS</h2>
      <div class="gallery-grid">
        <div class="gallery-item"><img src="https://i.postimg.cc/Njyt0mc4/IMG-5588.jpg" alt="Corte de cabello moderno 1" /></div>
        <div class="gallery-item"><img src="https://i.postimg.cc/YC47SYHm/IMG-5589.jpg" alt="Corte de cabello moderno 2" /></div>
        <div class="gallery-item"><img src="https://i.postimg.cc/L8qSsLp1/IMG-5590.jpg" alt="Corte de cabello moderno 3" /></div>
        <div class="gallery-item"><img src="https://i.postimg.cc/T3yxPg6y/IMG-5591.jpg" alt="Corte de cabello moderno 4" /></div>
        <div class="gallery-item"><img src="https://i.postimg.cc/zGLNfKry/IMG-5593.jpg" alt="Corte de cabello moderno 5" /></div>
        <div class="gallery-item"><img src="https://i.postimg.cc/ZKsZZj1v/IMG-5594.jpg" alt="Corte de cabello moderno 6" /></div>
      </div>
    </section>

    <footer class="footer">
      <p>¬© 2025 Duran's Barber Shop. Todos los derechos reservados.</p>
      <p><a href="https://maps.google.com/?q=3380+E+Russell+Rd+Ste+108+Las+Vegas,+NV" target="_blank" style="color:var(--color-texto); text-decoration:underline;">3380 E Russell Rd Ste 108 Las Vegas, NV 89120 Estados Unidos</a></p>
      <button class="btn-export" onclick="exportarJson()">EXPORTAR DATOS DE LA WEB</button>
    </footer>

    <script>
      function exportarJson() {
        const datosBarberia = {
          nombre: "Duran's Barber Shop",
          direccion: "3380 E Russell Rd Ste 108 Las Vegas, NV 89120 Estados Unidos",
          telefono: "55 1234 5678",
          servicios_ofrecidos: ["Corte", "Barba", "Lujo"],
          ultima_actualizacion: new Date().toLocaleDateString(),
        };
        const dataStr = JSON.stringify(datosBarberia, null, 2);
        const dataUri = "data:application/json;charset=utf-8," + encodeURIComponent(dataStr);
        const exportFileDefaultName = "datos_durans_barber.json";
        let linkElement = document.createElement("a");
        linkElement.setAttribute("href", dataUri);
        linkElement.setAttribute("download", exportFileDefaultName);
        linkElement.click();
      }

      // Modal de galer√≠a
      const modal = document.getElementById('imageModal');
      const modalImg = document.getElementById('modalContent');
      const captionText = document.getElementById('caption');
      document.querySelectorAll('.gallery-item img').forEach(img => {
        img.onclick = function(){ modal.style.display='block'; modalImg.src=this.src; captionText.innerHTML=this.alt; }
      });
      document.querySelector('#imageModal span').onclick = function(){ modal.style.display="none"; }
      modal.onclick = function(e){ if(e.target===modal){ modal.style.display="none"; } }
    </script>
  </body>
</html>